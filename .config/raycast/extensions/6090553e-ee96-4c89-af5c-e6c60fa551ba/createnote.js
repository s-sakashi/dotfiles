var T=Object.create;var f=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var w=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty;var p=e=>f(e,"__esModule",{value:!0});var S=(e,r)=>{for(var n in r)f(e,n,{get:r[n],enumerable:!0})},m=(e,r,n,l)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of k(r))!A.call(e,a)&&(n||a!=="default")&&f(e,a,{get:()=>r[a],enumerable:!(l=F(r,a))||l.enumerable});return e},h=(e,r)=>m(p(f(e!=null?T(w(e)):{},"default",!r&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),V=(e=>(r,n)=>e&&e.get(r)||(n=m(p({}),r,1),e&&e.set(r,n),n))(typeof WeakMap!="undefined"?new WeakMap:0);var L={};S(L,{default:()=>d});var t=require("@raycast/api"),g=h(require("fs")),c=h(require("path"));function N(e){let r=e.split(c.default.sep).filter(n=>{if(n!="")return n}).pop();return r||"Default Vault Name (check your path preferences)"}function C(){return(0,t.getPreferenceValues)().vaultPath.split(",").map(n=>({name:N(n.trim()),key:n.trim(),path:n.trim()})).filter(n=>!!n)}function x(){let r=(0,t.getPreferenceValues)().prefPath;return r||""}function b(){let r=(0,t.getPreferenceValues)().prefTag;return r?[r]:[]}function j(){let e=(0,t.getPreferenceValues)(),r=e.tags,n=e.prefTag;if(!r)return n?[{name:n,key:n}]:[];let l=r.split(",").map(a=>({name:a.trim(),key:a.trim()})).filter(a=>!!a);return n&&l.push({name:n,key:n}),l}function y(e){let r=e.vaultPath,{pop:n}=(0,t.useNavigation)();async function l(i,o,s){if(g.default.existsSync(c.default.join(i,o+".md"))){let u={title:"Override note",message:'Are you sure you want to override the note: "'+o+'"?',icon:t.Icon.ExclamationMark};await(0,t.confirmAlert)(u)&&a(i,o,s)}else a(i,o,s)}function a(i,o,s){try{try{g.default.mkdirSync(i,{recursive:!0})}catch{(0,t.showToast)(t.ToastStyle.Failure,"Couldn't create folder structure for the given path.");return}try{g.default.writeFileSync(c.default.join(i,o+".md"),s)}catch{(0,t.showToast)(t.ToastStyle.Failure,"Couldn't write the file: "+i+"/"+o+".md");return}(0,t.showToast)(t.ToastStyle.Success,"Created new note"),n()}catch{(0,t.showToast)(t.ToastStyle.Failure,"Something went wrong. Maybe your vault, path or filename is not valid.")}}function v(i,o){let s="";if(i.length>0){s=`---
tags: [`;for(let u=0;u<i.length-1;u++)s+='"'+i[u]+'",';s+='"'+i.pop()+`"]
---
`}return s+=o,s}function P(i){if(i.name=="")(0,t.showToast)(t.ToastStyle.Failure,"Please enter a name");else{let o=v(i.tags,i.content);l(c.default.join(r,i.path),i.name,o)}}return _jsx(t.Form,{navigationTitle:"Create new Note",actions:_jsx(t.ActionPanel,null,_jsx(t.SubmitFormAction,{title:"Create",onSubmit:P}))},_jsx(t.Form.TextField,{title:"Name",id:"name",placeholder:"Name of note"}),_jsx(t.Form.TextField,{title:"Path",id:"path",defaultValue:x(),placeholder:"path/to/note (optional)"}),_jsx(t.Form.TagPicker,{id:"tags",title:"Tags",defaultValue:b()},j()?.map(i=>_jsx(t.Form.TagPicker.Item,{value:i.name.toLowerCase(),title:i.name,key:i.key}))),_jsx(t.Form.TextArea,{title:"Content:",id:"content",placeholder:"Text"}))}function I(e){let r=e.vaults;return _jsx(t.List,null,r?.map(n=>_jsx(t.List.Item,{title:n.name,key:n.key,actions:_jsx(t.ActionPanel,null,_jsx(t.PushAction,{title:"Select Vault",target:_jsx(y,{vaultPath:n.path})}))})))}function d(){let e=C();if(e.length>1)return _jsx(I,{vaults:e});if(e.length==1)return _jsx(y,{vaultPath:e[0].path});(0,t.showToast)(t.ToastStyle.Failure,"Path Error","Something went wrong with your vault path. There are no paths to select from.")}module.exports=V(L);0&&(module.exports={});
